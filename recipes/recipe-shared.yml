modules:
  - type: files
    files:
      - source: system
        destination: /

  - type: dnf
    repos:
      cleanup: true
      files:
        - https://negativo17.org/repos/fedora-multimedia.repo
        - https://brave-browser-rpm-release.s3.brave.com/brave-browser.repo
      copr:
        - atim/starship
        - bieszczaders/kernel-cachyos-addons
        - alternateved/eza
        - dejan/lazygit
        - ublue-os/packages
    install:
      packages:
        - uupd
        - gstreamer1-plugins-bad
        - gstreamer1-plugins-ugly
        - fish
        - sudo-rs
        - du-dust
        - tealdeer
        - procs
        - eza
        - bat
        - zoxide
        - btop
        - lazygit
        - fastfetch
        - ripgrep
        - uutils-coreutils
        - micro
        - starship
        - podman-compose
        - steam-devices
        - inotify-tools # can remove when don't need cosmic screenshot organizer
        - unrar
        - yaru-icon-theme
        - brave-browser # better as native due to flatpak makes the chromium sandbox weaker
        - ananicy-cpp
        - cachyos-ananicy-rules
        - scx-scheds
        - scx-manager
    remove:
      auto-remove: true
      packages:
        - ark
        - htop
        - toolbox
        - gnome-system-monitor
        - fedora-bookmarks
        - nano
        - vim

  - type: dnf
    repos:
      cleanup: true
      files:
        - https://raw.githubusercontent.com/terrapkg/subatomic-repos/main/terra.repo
    install:
      packages:
        - v4l2loopback
  # - type: akmods
  #   base: main
  #   install:
  #     - v4l2loopback

  # - type: dnf
  #   repos:
  #     files:
  #       - https://openrazer.github.io/hardware:razer.repo

  # - type: akmods
  #   base: main
  #   install:
  #     - openrazer

  # - type: dnf
  #   install:
  #     packages:
  #       - openrazer-daemon
  #       - python3-openrazer
  #       - polychromatic

  - type: fonts
    fonts:
      nerd-fonts:
        - IBMPlexMono
      google-fonts:
        - IBM Plex Sans
        - IBM Plex Sans KR
        - IBM Plex Sans JP
        - IBM Plex Mono
        - IBM Plex Serif
        - Arimo # metrically compatible with: Arial & Helvetica
        - Tinos # metrically compatible with: Times New Roman & Times
        - Cousine # metrically compatible with: Courier New & Courier
        - Caladea # metrically compatible with: Cambria
        - Carlito # metrically compatible with: Calibri
      url-fonts:
        - name: IBM Plex Sans SC
          url: https://github.com/IBM/plex/releases/download/%40ibm%2Fplex-sans-sc%401.1.0/ibm-plex-sans-sc.zip
        - name: IBM Plex Sans TC
          url: https://github.com/IBM/plex/releases/download/%40ibm%2Fplex-sans-tc%401.1.1/ibm-plex-sans-tc.zip

  - type: default-flatpaks
    configurations:
      - notify: false
        scope: user
        repo:
          name: flathub
          title: Flathub
        install:
          - org.gnome.Loupe
          - org.gnome.Papers
          - org.gnome.font-viewer
          - com.dec05eba.gpu_screen_recorder
          - org.gtk.Gtk3theme.adw-gtk3
          - org.gtk.Gtk3theme.adw-gtk3-dark
          - com.spotify.Client
          - com.github.tchx84.Flatseal
          - io.missioncenter.MissionCenter
          - io.github.nozwock.Packet
          - dev.edfloreshz.CosmicTweaks
          - com.github.neithern.g4music
          - com.github.PintaProject.Pinta
          - com.discordapp.Discord
          - com.github.johnfactotum.Foliate
          - org.freedesktop.Platform.ffmpeg-full

  - type: default-flatpaks
    configurations:
      - notify: false
        scope: user
        repo:
          name: cosmic
          title: COSMIC
          url: https://apt.pop-os.org/cosmic/cosmic.flatpakrepo

  - type: systemd
    system:
      enabled:
        - ananicy-cpp.service
        - minfree.service
        - scx_loader.service
        - uupd.timer
      masked:
        - flatpak-add-fedora-repos.service
    user:
      enabled:
        - cosmic_screenshot_organizer.service
    #     - distrobox-upgrade-automatic.timer
    #     - flatpak-user-update.timer

  - type: script
    scripts:
      - font_rendering_symlinks.sh
      - cleanup.sh
